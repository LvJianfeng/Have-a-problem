## é—®é¢˜æè¿°ï¼šç‚¹å‡»æ¨é€é€šçŸ¥è¿›å…¥å›ºå®šé¡µé¢

### æˆ‘ç›®å‰çš„å¤„ç†
- APPæœªå¯åŠ¨
- APPå·²å¯åŠ¨ï¼Œåœ¨åå°
- iOS10ç‚¹å‡»æ¨é€

### éœ€è¦æ³¨æ„
iOS10 åº”ç”¨åœ¨å‰å°çš„æ—¶å€™ï¼Œæ¨é€é€šçŸ¥ä¼šæ˜¾ç¤ºï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç‚¹å‡»ï¼ŒiOS10 ä»¥ä¸‹çš„ç³»ç»Ÿï¼Œæˆ‘ä»¬ç›®å‰å…ˆå¿½ç•¥çš„å‘¢ï¼Œå¦‚æœæœ‰éœ€è¦å®ç°çš„å¯ä»¥è‡ªå·±å®šåˆ¶å°±å¯ä»¥äº†ï¼Œæˆ–è€…æœ‰ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„å“¦ï¼Œä¸‹é¢ç»™å‡ºä¼ é€é—¨

ğŸ‘‡ğŸ‘‡ğŸ‘‡[EBForeNotification](https://github.com/pikacode/EBForeNotification)ğŸ‘‡ğŸ‘‡ğŸ‘‡

### æ”¾å¤§æ‹›(ç¤ºä¾‹ä»£ç )
å…ˆè¯´ä¸‹ï¼šæˆ‘çš„è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„ï¼Œå¸Œæœ›å¯ä»¥åˆ†äº«ä¸‹å“¦ã€‚

#### iOS10ç³»ç»Ÿä¹‹å‰
```swift
func application(_ application: UIApplication, didReceiveRemoteNotification userInfo: [AnyHashable : Any], fetchCompletionHandler completionHandler: @escaping (UIBackgroundFetchResult) -> Void) {
    // æå…‰
    JPUSHService.handleRemoteNotification(userInfo)
    completionHandler(.newData)
    
    // è¿™è¾¹åˆ¤æ–­åº”ç”¨æ˜¯å¦åœ¨ å‰å° æ³¨æ„æ˜¯ä¸ç­‰äº .active
    if application.applicationState != .active {
        // è·³è½¬åˆ°å›ºå®šé¡µé¢
        pushNoticeViewController()
    }
}
```

#### iOS10ç³»ç»Ÿ
```swift
@available(iOS 10.0, *)
func jpushNotificationCenter(_ center: UNUserNotificationCenter!, didReceive response: UNNotificationResponse!, withCompletionHandler completionHandler: (() -> Void)!) {
    if response.notification.request.trigger is UNPushNotificationTrigger {
        JPUSHService.handleRemoteNotification(response.notification.request.content.userInfo)
    }
    // è·³è½¬åˆ°å›ºå®šé¡µé¢
    pushNoticeViewController()
    completionHandler()
}
```

#### è·³è½¬å›ºå®šé¡µé¢
```swift
func pushNoticeViewController() {
    let noticeVC = SXNoticeListViewController()
    let tabBarController: UITabBarViewController? = (self.window?.rootViewController as? UITabBarViewController)
    if tabBarController != nil {
        if (tabBarController?.selectedViewController?.childViewControllers.last) is SXNoticeListViewController {
            ((tabBarController?.selectedViewController?.childViewControllers.last) as! SXNoticeListViewController).tableView.mj_header.beginRefreshing()
        }else{
            (tabBarController?.selectedViewController?.childViewControllers.last)?.pushVC(noticeVC)
        }
    }
}
```

#### æ³¨æ„
ä»¥ä¸Šå†…å®¹ä¸ºä¸ªäººæ•´ç†ï¼Œå¦‚æœæœ‰é—®é¢˜æœ‰å‡ºå…¥æˆ–è€…ä½ æœ‰æ›´å¥½çš„è§£å†³æ–¹æ³•ï¼Œè¿˜è¯·èµæ•™å“¦ï¼Œæ„Ÿè°¢ã€‚
